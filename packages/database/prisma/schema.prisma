// Unified Prisma Schema for Clinical Decision Engine
//
// This schema combines all domain models from:
// - Decision Intelligence
// - Integration & Interoperability
// - Knowledge & Evidence
// - Workflow & Care Pathways
// - Patient Clinical Data
//
// Generated by consolidating domain-specific schemas
// Last updated: 2025-12-15

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


// === DECISION INTELLIGENCE ===
enum SeverityEnum {
  low
  medium
  high
  critical
}

enum StatusEnum {
  active
  snoozed
  overridden
  resolved
}

enum RequesttypeEnum {
  diagnostic
  treatment
  risk_assessment
  pathway_selection
}

enum PriorityEnum {
  low
  normal
  high
  urgent
}

enum ExperimenttypeEnum {
  ab
  multi_arm
}

enum ExplanationtypeEnum {
  feature_importance
  rule_trace
  evidence_summary
  model_reasoning
}

enum RecommendationtypeEnum {
  diagnostic
  treatment
  monitoring
  follow_up
  documentation
  other
}

enum RisktypeEnum {
  mortality
  readmission
  complication
  disease_progression
  other
}

model AlertEvaluation {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33)
  decisionSessionId String @db.Char(33) /// FK: References DecisionSession
  clinicalRuleId String @db.Char(33)
  severity SeverityEnum
  fired Boolean @default(true)
  reasons String[]
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([clinicalRuleId])
  @@index([patientId])
  @@index([decisionSessionId])
  @@index([orgId, status])
  // Relationship: decisionSessionId -> DecisionSession
}

model AlertEvaluationUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  snoozedUntil DateTime
  overriddenBy String
  overriddenAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model DecisionMetricSnapshot {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  decisionPolicyId String @db.Char(33) /// FK: References DecisionPolicy
  modelDefinitionId String @db.Char(33)
  snapshotDate DateTime
  metrics String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([decisionPolicyId])
  @@index([modelDefinitionId])
  // Relationship: decisionPolicyId -> DecisionPolicy
}

model DecisionPolicy {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  configuration String
  status StatusEnum @default(active)
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model DecisionPolicyUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  configuration String
  status StatusEnum
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model DecisionRequest {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  decisionSessionId String @db.Char(33) /// FK: References DecisionSession
  patientId String @db.Char(33)
  requestType RequesttypeEnum
  context String
  priority PriorityEnum @default(normal)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([decisionSessionId])
  // Relationship: decisionSessionId -> DecisionSession
}

model DecisionResult {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  decisionRequestId String @db.Char(33) /// FK: References DecisionRequest
  decisionSessionId String @db.Char(33) /// FK: References DecisionSession
  status StatusEnum @default(active)
  result String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([decisionSessionId])
  @@index([decisionRequestId])
  @@index([orgId, status])
  // Relationship: decisionRequestId -> DecisionRequest
  // Relationship: decisionSessionId -> DecisionSession
}

model DecisionResultUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  result String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model DecisionSession {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33)
  encounterId String @db.Char(33)
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  @@index([orgId, status])
}

model DecisionSessionUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  endedAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model Error {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  error String
  message String
  details String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ExperimentArm {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  experimentId String @db.Char(33) /// FK: References Experiment
  name String
  decisionPolicyId String @db.Char(33) /// FK: References DecisionPolicy
  modelVersionId String @db.Char(33)
  trafficPercentage Float
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([modelVersionId])
  @@index([decisionPolicyId])
  @@index([experimentId])
  // Relationship: experimentId -> Experiment
  // Relationship: decisionPolicyId -> DecisionPolicy
}

model Experiment {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  experimentType ExperimenttypeEnum
  status StatusEnum @default(active)
  startDate DateTime
  endDate DateTime
  trafficAllocation String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ExperimentResult {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  experimentId String @db.Char(33) /// FK: References Experiment
  armId String @db.Char(33)
  metrics String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([armId])
  @@index([experimentId])
  // Relationship: experimentId -> Experiment
}

model ExperimentUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  status StatusEnum
  endDate DateTime
  trafficAllocation String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model Explanation {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  explanationType ExplanationtypeEnum
  content String
  relatedEntityType String
  relatedEntityId String @db.Char(33)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([relatedEntityId])
}

model FeatureAttribution {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  explanationId String @db.Char(33) /// FK: References Explanation
  featureName String
  attribution Float
  contribution Float
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([explanationId])
  // Relationship: explanationId -> Explanation
}

model ModelInvocation {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  modelVersionId String @db.Char(33)
  patientId String @db.Char(33)
  inputs String
  outputs String
  performanceMetadata String
  executionTime Float
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([modelVersionId])
  @@index([patientId])
}

model Recommendation {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  decisionResultId String @db.Char(33) /// FK: References DecisionResult
  recommendationType RecommendationtypeEnum
  title String
  description String
  suggestion String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([decisionResultId])
  @@index([orgId, status])
  // Relationship: decisionResultId -> DecisionResult
}

model RecommendationUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  acceptedBy String
  acceptedAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model RiskAssessment {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33)
  decisionResultId String @db.Char(33) /// FK: References DecisionResult
  riskType RisktypeEnum
  score Float
  scoreRange String
  interpretation String
  factors String[]
  modelId String @db.Char(33)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([modelId])
  @@index([patientId])
  @@index([decisionResultId])
  // Relationship: decisionResultId -> DecisionResult
}

model RiskAssessmentUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  score Float
  interpretation String
  factors String[]
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model RuleTrace {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  explanationId String @db.Char(33) /// FK: References Explanation
  ruleId String @db.Char(33)
  ruleName String
  conditionMet Boolean
  actionExecuted String
  trace String[]
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([explanationId])
  @@index([ruleId])
  // Relationship: explanationId -> Explanation
}

model SimulationMetric {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  simulationRunId String @db.Char(33) /// FK: References SimulationRun
  metricName String
  metricValue Decimal
  metricType String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([simulationRunId])
  // Relationship: simulationRunId -> SimulationRun
}

model SimulationRun {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  simulationScenarioId String @db.Char(33) /// FK: References SimulationScenario
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([simulationScenarioId])
  @@index([orgId, status])
  // Relationship: simulationScenarioId -> SimulationScenario
}

model SimulationScenario {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  scenarioDefinition String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model SimulationScenarioUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  scenarioDefinition String
  status StatusEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ThresholdProfile {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  thresholds String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ThresholdProfileUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  thresholds String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Timestamps {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}


// === INTEGRATION INTEROPERABILITY ===
enum CredentialtypeEnum {
  api_key
  oauth_client
  certificate
}

enum ProtocolEnum {
  fhir
  hl7
  rest
  soap
  other
}

enum FormatEnum {
  csv
  ndjson
  fhir_bulk
  other
}

enum SystemtypeEnum {
  ehr
  lis
  ris
  pms
  hie
  payer
  other
}

enum BundletypeEnum {
  document
  message
  transaction
  transaction_response
  batch
  batch_response
  history
  searchset
  collection
}

enum DirectionEnum {
  inbound
  outbound
}

enum JobtypeEnum {
  sync
  import
  export
  scheduled
  manual
}

enum LoglevelEnum {
  debug
  info
  warn
  error
}

enum ErrortypeEnum {
  message_level
  record_level
  validation
  connection
  other
}

enum EndpointtypeEnum {
  fhir
  hl7
  rest
  soap
  other
}

enum MetrictypeEnum {
  request_count
  error_count
  latency
  throttle_count
}

model APIClient {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  status StatusEnum @default(active)
  rateLimit Int
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model APIClientUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  status StatusEnum
  rateLimit Int
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model APICredential {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  apiClientId String @db.Char(33) /// FK: References APIClient
  credentialType CredentialtypeEnum
  keyId String @db.Char(33)
  secret String
  expiresAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([keyId])
  @@index([apiClientId])
  // Relationship: apiClientId -> APIClient
}

model APICredentialUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  expiresAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Connection {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  externalSystemId String @db.Char(33) /// FK: References ExternalSystem
  name String
  description String
  baseUrl String
  protocol ProtocolEnum
  profile String
  credentials String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([externalSystemId])
  @@index([orgId, status])
  // Relationship: externalSystemId -> ExternalSystem
}

model ConnectionUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  baseUrl String
  credentials String
  status StatusEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model DataExportBatch {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  targetSystemId String @db.Char(33)
  format String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([targetSystemId])
  @@index([orgId, status])
}

model DataExportBatchUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  status StatusEnum
  filesGenerated Int
  completedAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model DataImportBatch {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  format FormatEnum
  sourceUrl String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model DataImportBatchUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  status StatusEnum
  recordsProcessed Int
  recordsFailed Int
  completedAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model EventDelivery {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  eventSubscriptionId String @db.Char(33) /// FK: References EventSubscription
  eventData String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([eventSubscriptionId])
  @@index([orgId, status])
  // Relationship: eventSubscriptionId -> EventSubscription
}

model EventDeliveryUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  deliveredAt DateTime
  retryCount Int
  errorMessage String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model EventSubscription {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  eventType String
  webhookUrl String
  externalSystemId String @db.Char(33) /// FK: References ExternalSystem
  filters String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([externalSystemId])
  @@index([orgId, status])
  // Relationship: externalSystemId -> ExternalSystem
}

model EventSubscriptionUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  webhookUrl String
  filters String
  status StatusEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ExportFile {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  dataExportBatchId String @db.Char(33) /// FK: References DataExportBatch
  fileName String
  fileUrl String
  fileSize Int
  recordCount Int
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([dataExportBatchId])
  // Relationship: dataExportBatchId -> DataExportBatch
}

model ExternalSystem {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  systemType SystemtypeEnum
  vendor String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ExternalSystemUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  vendor String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model FHIRBundle {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  bundleType BundletypeEnum
  resources String[]
  direction DirectionEnum @default(inbound)
  connectionId String @db.Char(33) /// FK: References Connection
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([connectionId])
  // Relationship: connectionId -> Connection
}

model FHIRMappingProfile {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  externalSystemId String @db.Char(33) /// FK: References ExternalSystem
  sourceProfile String
  targetProfile String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([externalSystemId])
  // Relationship: externalSystemId -> ExternalSystem
}

model FHIRMappingProfileUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  sourceProfile String
  targetProfile String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model HL7MappingProfile {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  externalSystemId String @db.Char(33) /// FK: References ExternalSystem
  messageType String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([externalSystemId])
  // Relationship: externalSystemId -> ExternalSystem
}

model HL7MappingProfileUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  messageType String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model HL7Message {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  rawMessage String
  messageType String
  direction DirectionEnum @default(inbound)
  connectionId String @db.Char(33) /// FK: References Connection
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([connectionId])
  // Relationship: connectionId -> Connection
}

model HL7Segment {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  hl7MessageId String @db.Char(33) /// FK: References HL7Message
  segmentType String
  segmentData String
  order Int
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([hl7MessageId])
  // Relationship: hl7MessageId -> HL7Message
}

model ImportRecord {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  dataImportBatchId String @db.Char(33) /// FK: References DataImportBatch
  recordNumber Int
  recordData String
  status StatusEnum
  errorMessage String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([dataImportBatchId])
  @@index([orgId, status])
  // Relationship: dataImportBatchId -> DataImportBatch
}

model IntegrationJob {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  externalSystemId String @db.Char(33) /// FK: References ExternalSystem
  connectionId String @db.Char(33) /// FK: References Connection
  jobType JobtypeEnum
  schedule String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([connectionId])
  @@index([externalSystemId])
  @@index([orgId, status])
  // Relationship: externalSystemId -> ExternalSystem
  // Relationship: connectionId -> Connection
}

model IntegrationJobUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  schedule String
  status StatusEnum
  lastRunAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model IntegrationLog {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  integrationRunId String @db.Char(33) /// FK: References IntegrationRun
  logLevel LoglevelEnum
  message String
  timestamp DateTime
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([integrationRunId])
  // Relationship: integrationRunId -> IntegrationRun
}

model IntegrationRun {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  integrationJobId String @db.Char(33) /// FK: References IntegrationJob
  status StatusEnum @default(active)
  startedAt DateTime
  recordsProcessed Int
  recordsTotal Int
  errorCount Int
  executionTime Float
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([integrationJobId])
  @@index([orgId, status])
  // Relationship: integrationJobId -> IntegrationJob
}

model InterfaceError {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  errorType ErrortypeEnum
  message String
  entityType String
  entityId String @db.Char(33)
  connectionId String @db.Char(33) /// FK: References Connection
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([connectionId])
  @@index([entityId])
  @@index([orgId, status])
  // Relationship: connectionId -> Connection
}

model InterfaceErrorUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  resolvedAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model InterfaceHealthCheck {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  connectionId String @db.Char(33) /// FK: References Connection
  status StatusEnum
  latency Float
  lastSuccessAt DateTime
  lastFailureAt DateTime
  availability Float
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([connectionId])
  @@index([orgId, status])
  // Relationship: connectionId -> Connection
}

model MappingResult {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  hl7MessageId String @db.Char(33) /// FK: References HL7Message
  mappingProfileId String @db.Char(33)
  result String
  success Boolean
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([mappingProfileId])
  @@index([hl7MessageId])
  // Relationship: hl7MessageId -> HL7Message
}

model MappingRule {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  mappingProfileId String @db.Char(33)
  sourcePath String
  targetPath String
  transformation String
  order Int
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([mappingProfileId])
}

model SystemEndpoint {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  externalSystemId String @db.Char(33) /// FK: References ExternalSystem
  endpointType EndpointtypeEnum
  url String
  description String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([externalSystemId])
  // Relationship: externalSystemId -> ExternalSystem
}

model UsageMetric {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  apiClientId String @db.Char(33) /// FK: References APIClient
  metricType MetrictypeEnum
  value Decimal
  period String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([apiClientId])
  // Relationship: apiClientId -> APIClient
}


// === KNOWLEDGE EVIDENCE ===
enum RuletypeEnum {
  alert
  recommendation
  calculation
  workflow
}

enum EquivalenceEnum {
  related_to
  equivalent
  wider
  narrower
  specializes
  generalizes
}

enum CitationtypeEnum {
  paper
  guideline
  trial
  systematic_review
  other
}

enum GradelevelEnum {
  high
  moderate
  low
  very_low
}

enum StrengthofrecommendationEnum {
  strong
  weak
  conditional
}

enum ModeltypeEnum {
  diagnostic
  prognostic
  treatment
  risk_assessment
  other
}

enum TesttypeEnum {
  unit
  integration
  validation
  performance
}

enum ItemtypeEnum {
  medication
  lab
  imaging
  procedure
  other
}

enum QuestiontypeEnum {
  boolean
  choice
  date
  decimal
  integer
  string
  text
}

model CareProtocolTemplate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  status StatusEnum
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model CareProtocolTemplateUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  status StatusEnum
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ClinicalGuideline {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  title String
  description String
  organization String
  publicationDate DateTime
  effectiveDate DateTime
  version String
  url String
  category String
  keywords String[]
  content String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ClinicalGuidelineUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  title String
  description String
  effectiveDate DateTime
  version String
  url String
  category String
  keywords String[]
  content String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ClinicalRule {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  ruleType RuletypeEnum
  condition String
  action String
  priority Int
  enabled Boolean @default(true)
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ClinicalRuleUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  condition String
  action String
  priority Int
  enabled Boolean
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ClinicalRuleVersion {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  clinicalRuleId String @db.Char(33) /// FK: References ClinicalRule
  version String
  condition String
  action String
  effectiveDate DateTime
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([clinicalRuleId])
  // Relationship: clinicalRuleId -> ClinicalRule
}

model CodeableConcept {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  coding String[]
  text String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Coding {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  system String
  code String
  display String
  version String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ConceptMap {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  sourceSystem String
  targetSystem String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ConceptMapUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ConceptMapping {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  conceptMapId String @db.Char(33) /// FK: References ConceptMap
  sourceCode String
  targetCode String
  equivalence EquivalenceEnum
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([conceptMapId])
  // Relationship: conceptMapId -> ConceptMap
}

model EvidenceCitation {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  citationType CitationtypeEnum
  title String
  authors String[]
  publicationDate DateTime
  journal String
  url String
  doi String
  pmid String @db.Uuid
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model EvidenceCitationUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  title String
  authors String[]
  publicationDate DateTime
  journal String
  url String
  doi String
  pmid String @db.Uuid
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model EvidenceReview {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  evidenceCitationId String @db.Char(33) /// FK: References EvidenceCitation
  gradeLevel GradelevelEnum
  strengthOfRecommendation StrengthofrecommendationEnum
  notes String
  reviewedBy String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([evidenceCitationId])
  // Relationship: evidenceCitationId -> EvidenceCitation
}

model EvidenceReviewUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  gradeLevel GradelevelEnum
  strengthOfRecommendation StrengthofrecommendationEnum
  notes String
  reviewedBy String
  reviewDate DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model FeatureDefinition {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  modelVersionId String @db.Char(33) /// FK: References ModelVersion
  name String
  dataType String
  required Boolean
  description String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([modelVersionId])
  // Relationship: modelVersionId -> ModelVersion
}

model GuidelineSection {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  guidelineId String @db.Char(33)
  title String
  order Int
  content String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([guidelineId])
}

model KnowledgePackage {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  useCase String
  status StatusEnum
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model KnowledgePackageUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  useCase String
  status StatusEnum
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ModelDefinition {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  modelType ModeltypeEnum
  algorithm String
  framework String
  currentVersion String
  status StatusEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ModelDefinitionUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  currentVersion String
  status StatusEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ModelTest {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  modelVersionId String @db.Char(33) /// FK: References ModelVersion
  testType TesttypeEnum
  testData String
  results String
  passed Boolean
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([modelVersionId])
  // Relationship: modelVersionId -> ModelVersion
}

model ModelVersion {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  modelDefinitionId String @db.Char(33) /// FK: References ModelDefinition
  version String
  artifactUrl String
  performanceMetrics String
  trainingDate DateTime
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([modelDefinitionId])
  @@index([orgId, status])
  // Relationship: modelDefinitionId -> ModelDefinition
}

model ModelVersionUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  artifactUrl String
  performanceMetrics String
  status StatusEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model OntologyTerm {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  code String
  display String
  system String
  parentId String @db.Char(33)
  level Int
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([parentId])
}

model OrderSetItem {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  orderSetTemplateId String @db.Char(33) /// FK: References OrderSetTemplate
  itemType ItemtypeEnum
  code String
  required Boolean
  default Boolean
  order Int
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orderSetTemplateId])
  // Relationship: orderSetTemplateId -> OrderSetTemplate
}

model OrderSetTemplate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  status StatusEnum
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model OrderSetTemplateUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  status StatusEnum
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model PerformanceMetric {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  modelDefinitionId String @db.Char(33) /// FK: References ModelDefinition
  metricType MetrictypeEnum
  value Decimal
  date DateTime
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([modelDefinitionId])
  // Relationship: modelDefinitionId -> ModelDefinition
}

model ProtocolStep {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  careProtocolId String @db.Char(33)
  stepNumber Int
  title String
  description String
  order Int
  conditions String
  actions String[]
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([careProtocolId])
}

model QuestionnaireQuestion {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  questionnaireTemplateId String @db.Char(33) /// FK: References QuestionnaireTemplate
  questionText String
  questionType QuestiontypeEnum
  required Boolean
  order Int
  options String[]
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([questionnaireTemplateId])
  // Relationship: questionnaireTemplateId -> QuestionnaireTemplate
}

model QuestionnaireTemplate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model QuestionnaireTemplateUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model RuleSet {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model RuleSetUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model RuleTest {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  clinicalRuleId String @db.Char(33) /// FK: References ClinicalRule
  name String
  testData String
  expectedResult String
  actualResult String
  passed Boolean
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([clinicalRuleId])
  // Relationship: clinicalRuleId -> ClinicalRule
}

model ScoringItem {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  scoringTemplateId String @db.Char(33) /// FK: References ScoringTemplate
  name String
  code String
  weight Decimal
  order Int
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([scoringTemplateId])
  // Relationship: scoringTemplateId -> ScoringTemplate
}

model ScoringTemplate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  calculationFormula String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ScoringTemplateUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  calculationFormula String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model TermMapping {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  sourceTermId String @db.Char(33)
  targetTermId String @db.Char(33)
  targetSystem String
  equivalence EquivalenceEnum
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([sourceTermId])
  @@index([targetTermId])
}

model ValueSetCode {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  valueSetId String @db.Char(33) /// FK: References ValueSet
  code String
  system String
  display String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([valueSetId])
  // Relationship: valueSetId -> ValueSet
}

model ValueSet {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ValueSetUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}


// === WORKFLOW CARE PATHWAYS ===
enum AlerttypeEnum {
  drug_interaction
  allergy
  critical_value
  clinical_rule
  other
}

enum AssignedtotypeEnum {
  user
  role
  team
}

enum TasktypeEnum {
  medication
  procedure
  lab_order
  appointment
  education
  other
}

enum QueuetypeEnum {
  task
  alert
  mixed
}

model Alert {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33)
  alertType AlerttypeEnum
  severity SeverityEnum
  title String
  message String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([orgId, status])
}

model AlertUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  acknowledgedBy String
  acknowledgedAt DateTime
  resolvedAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model AuditEvent {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  entityType String
  entityId String @db.Char(33)
  eventType String
  userId String @db.Char(33)
  timestamp DateTime
  details String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([userId])
  @@index([entityId])
}

model CarePathwayTemplate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model CarePathwayTemplateUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model CarePlanGoal {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  carePlanId String @db.Char(33) /// FK: References CarePlan
  description String
  targetDate DateTime
  status StatusEnum
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([carePlanId])
  @@index([orgId, status])
  // Relationship: carePlanId -> CarePlan
}

model CarePlan {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33)
  episodeOfCareId String @db.Char(33) /// FK: References EpisodeOfCare
  carePathwayTemplateId String @db.Char(33) /// FK: References CarePathwayTemplate
  title String
  description String
  status StatusEnum @default(active)
  startDate DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([carePathwayTemplateId])
  @@index([episodeOfCareId])
  @@index([patientId])
  @@index([orgId, status])
  // Relationship: episodeOfCareId -> EpisodeOfCare
  // Relationship: carePathwayTemplateId -> CarePathwayTemplate
}

model CarePlanUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  title String
  description String
  status StatusEnum
  endDate DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ChecklistInstance {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  checklistTemplateId String @db.Char(33) /// FK: References ChecklistTemplate
  patientId String @db.Char(33)
  carePlanId String @db.Char(33) /// FK: References CarePlan
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([checklistTemplateId])
  @@index([patientId])
  @@index([carePlanId])
  @@index([orgId, status])
  // Relationship: checklistTemplateId -> ChecklistTemplate
  // Relationship: carePlanId -> CarePlan
}

model ChecklistInstanceUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  completedAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ChecklistItem {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  checklistTemplateId String @db.Char(33) /// FK: References ChecklistTemplate
  itemText String
  order Int
  required Boolean
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([checklistTemplateId])
  // Relationship: checklistTemplateId -> ChecklistTemplate
}

model ChecklistItemInstance {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  checklistInstanceId String @db.Char(33) /// FK: References ChecklistInstance
  checklistItemId String @db.Char(33) /// FK: References ChecklistItem
  checked Boolean
  checkedAt DateTime
  checkedBy String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([checklistInstanceId])
  @@index([checklistItemId])
  // Relationship: checklistInstanceId -> ChecklistInstance
  // Relationship: checklistItemId -> ChecklistItem
}

model ChecklistTemplate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ChecklistTemplateUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Encounter {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33)
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
}

model EpisodeOfCare {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33)
  status StatusEnum @default(active)
  startDate DateTime
  condition String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([orgId, status])
}

model EpisodeOfCareUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  endDate DateTime
  condition String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model EscalationPolicy {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  enabled Boolean @default(true)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model EscalationPolicyUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  enabled Boolean
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model EscalationRule {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  escalationPolicyId String @db.Char(33) /// FK: References EscalationPolicy
  ruleType RuletypeEnum
  conditions String
  actions String
  order Int
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([escalationPolicyId])
  // Relationship: escalationPolicyId -> EscalationPolicy
}

model Handoff {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33)
  fromTeam String
  toTeam String
  handoffType String
  handoffDate DateTime
  notes String
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([orgId, status])
}

model HandoffUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  handoffType String
  handoffDate DateTime
  notes String
  status StatusEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model PathwayStep {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  carePathwayTemplateId String @db.Char(33) /// FK: References CarePathwayTemplate
  stepNumber Int
  title String
  description String
  order Int
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([carePathwayTemplateId])
  // Relationship: carePathwayTemplateId -> CarePathwayTemplate
}

model RoutingRule {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  conditions String
  targetQueue String
  targetTeam String
  targetRole String
  priority Int
  enabled Boolean @default(true)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model RoutingRuleUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  conditions String
  targetQueue String
  targetTeam String
  targetRole String
  priority Int
  enabled Boolean
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ScheduleTemplate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  schedulePattern String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ScheduleTemplateUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  schedulePattern String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model TaskAssignment {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  taskId String @db.Char(33) /// FK: References Task
  assignedTo String
  assignedToType AssignedtotypeEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([taskId])
  // Relationship: taskId -> Task
}

model TaskAssignmentUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  assignedTo String
  assignedToType AssignedtotypeEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model TaskComment {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  taskId String @db.Char(33) /// FK: References Task
  comment String
  author String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([taskId])
  // Relationship: taskId -> Task
}

model Task {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  carePlanId String @db.Char(33) /// FK: References CarePlan
  workflowInstanceId String @db.Char(33) /// FK: References WorkflowInstance
  patientId String @db.Char(33)
  title String
  description String
  taskType TasktypeEnum
  status StatusEnum @default(active)
  priority PriorityEnum @default(normal)
  dueDate DateTime
  assignedTo String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([workflowInstanceId])
  @@index([carePlanId])
  @@index([orgId, status])
  // Relationship: carePlanId -> CarePlan
  // Relationship: workflowInstanceId -> WorkflowInstance
}

model TaskUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  title String
  description String
  status StatusEnum
  priority PriorityEnum
  dueDate DateTime
  assignedTo String
  completedAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model WorkQueue {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  teamId String @db.Char(33)
  role String
  queueType QueuetypeEnum @default(mixed)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([teamId])
}

model WorkQueueUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  teamId String @db.Char(33)
  role String
  queueType QueuetypeEnum
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([teamId])
}

model WorkflowDefinition {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model WorkflowDefinitionUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  description String
  category String
  version String
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model WorkflowEvent {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  workflowInstanceId String @db.Char(33) /// FK: References WorkflowInstance
  eventType String
  eventData String
  occurredAt DateTime
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([workflowInstanceId])
  // Relationship: workflowInstanceId -> WorkflowInstance
}

model WorkflowInstance {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  workflowDefinitionId String @db.Char(33) /// FK: References WorkflowDefinition
  patientId String @db.Char(33)
  encounterId String @db.Char(33) /// FK: References Encounter
  episodeOfCareId String @db.Char(33) /// FK: References EpisodeOfCare
  status StatusEnum @default(active)
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([episodeOfCareId])
  @@index([patientId])
  @@index([workflowDefinitionId])
  @@index([encounterId])
  @@index([orgId, status])
  // Relationship: workflowDefinitionId -> WorkflowDefinition
  // Relationship: encounterId -> Encounter
  // Relationship: episodeOfCareId -> EpisodeOfCare
}

model WorkflowInstanceUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  currentState String
  status StatusEnum
  completedAt DateTime
  metadata String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model WorkflowState {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  workflowDefinitionId String @db.Char(33) /// FK: References WorkflowDefinition
  name String
  order Int
  isInitial Boolean
  isFinal Boolean
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([workflowDefinitionId])
  // Relationship: workflowDefinitionId -> WorkflowDefinition
}

model WorkflowTransition {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  workflowDefinitionId String @db.Char(33) /// FK: References WorkflowDefinition
  fromStateId String @db.Char(33)
  toStateId String @db.Char(33)
  trigger String
  conditions String
  createdAt DateTime
  updatedAt DateTime
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([fromStateId])
  @@index([workflowDefinitionId])
  @@index([toStateId])
  // Relationship: workflowDefinitionId -> WorkflowDefinition
}


// === PATIENT CLINICAL DATA ===
enum UseEnum {
  home
  work
  temp
  old
}

enum TypeEnum {
  postal
  physical
  both
}

enum CriticalityEnum {
  low
  high
  unable_to_assess
}

enum NotetypeEnum {
  history_physical
  progress
  discharge
  consultation
  procedure
  other
}

enum SystemEnum {
  phone
  fax
  email
  pager
  url
  sms
  other
}

enum ClassEnum {
  inpatient
  outpatient
  emergency
  ambulatory
  virtual
}

enum GenderEnum {
  male
  female
  other
  unknown
}

model Address {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  use UseEnum
  type TypeEnum
  line String[]
  city String
  state String
  postalCode String
  country String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([type])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Allergy {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  code String
  reaction String[]
  criticality CriticalityEnum
  status StatusEnum @default(active)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
}

model AllergyReaction {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  substance String
  manifestation String[]
  severity SeverityEnum
  onset DateTime
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model AllergyUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  reaction String[]
  criticality CriticalityEnum
  status StatusEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model Attachment {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  contentType String
  url String
  title String
  size Int
  hash String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model CareTeam {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  encounterId String @db.Char(33) /// FK: References Encounter
  participant String[]
  status StatusEnum @default(active)
  period String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
  // Relationship: encounterId -> Encounter
}

model CareTeamMember {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  careTeamId String @db.Char(33) /// FK: References CareTeam
  practitionerId String @db.Char(33)
  role String
  period String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([practitionerId])
  @@index([careTeamId])
  // Relationship: careTeamId -> CareTeam
}

model CareTeamParticipant {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  role String
  member String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model CareTeamUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  participant String[]
  status StatusEnum
  period String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ClinicalNote {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  encounterId String @db.Char(33) /// FK: References Encounter
  noteType NotetypeEnum
  author String
  content String
  title String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  // Relationship: patientId -> Patient
  // Relationship: encounterId -> Encounter
}

model ClinicalNoteUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  content String
  title String
  noteType NotetypeEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Condition {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  encounterId String @db.Char(33) /// FK: References Encounter
  code String
  severity String
  onsetDateTime DateTime
  status StatusEnum @default(active)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
  // Relationship: encounterId -> Encounter
}

model ConditionUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  code String
  severity String
  abatementDateTime DateTime
  status StatusEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model ContactPoint {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  system SystemEnum
  value String
  use UseEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model DiagnosticReport {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  encounterId String @db.Char(33) /// FK: References Encounter
  code String
  effectiveDateTime DateTime
  status StatusEnum @default(active)
  conclusion String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
  // Relationship: encounterId -> Encounter
}

model DiagnosticReportUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  conclusion String
  status StatusEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model DocumentContent {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  attachment String
  format String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model DocumentReference {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  encounterId String @db.Char(33) /// FK: References Encounter
  type String
  content String[]
  status StatusEnum @default(active)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([type])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
  // Relationship: encounterId -> Encounter
}

model DocumentReferenceUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  content String[]
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model Dosage {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  text String
  timing String
  route String
  doseQuantity String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Duration {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  value Decimal
  unit String
  system String
  code String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model EncounterUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  period String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model HumanName {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  use UseEnum
  family String
  given String[]
  prefix String[]
  suffix String[]
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Identifier {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  system String
  value String
  type String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([type])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model ImagingSeries {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  imagingStudyId String @db.Char(33) /// FK: References ImagingStudy
  uid String @db.Uuid
  modality String
  numberOfInstances Int
  started DateTime
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([imagingStudyId])
  // Relationship: imagingStudyId -> ImagingStudy
}

model ImagingStudy {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  encounterId String @db.Char(33) /// FK: References Encounter
  modality String[]
  started DateTime
  status StatusEnum @default(active)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
  // Relationship: encounterId -> Encounter
}

model ImagingStudyUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  status StatusEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model Immunization {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  vaccineCode String
  occurrenceDateTime DateTime
  primarySource Boolean @default(true)
  lotNumber String
  status StatusEnum @default(active)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
}

model ImmunizationUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  occurrenceDateTime DateTime
  status StatusEnum
  lotNumber String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model MedicationOrder {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  encounterId String @db.Char(33) /// FK: References Encounter
  medicationCodeableConcept String
  dosageInstruction String[]
  status StatusEnum @default(active)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
  // Relationship: encounterId -> Encounter
}

model MedicationOrderUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  dosageInstruction String[]
  status StatusEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model MedicationStatement {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  medicationCodeableConcept String
  effectivePeriod String
  dosage String[]
  status StatusEnum @default(active)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
}

model MedicationStatementUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  effectivePeriod String
  dosage String[]
  status StatusEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model Observation {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  encounterId String @db.Char(33) /// FK: References Encounter
  code String
  category String[]
  effectiveDateTime DateTime
  valueQuantity String
  valueString String
  valueBoolean Boolean
  valueDateTime DateTime
  status StatusEnum @default(active)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
  // Relationship: encounterId -> Encounter
}

model ObservationUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  valueQuantity String
  valueString String
  valueBoolean Boolean
  valueDateTime DateTime
  status StatusEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model Pagination {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  page Int
  limit Int
  total Int
  totalPages Int
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Patient {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  identifiers String[]
  name String
  gender GenderEnum
  birthDate DateTime
  address String[]
  telecom String[]
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  // Relationship: patientId -> Patient
}

model PatientList {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  data String[]
  pagination String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model PatientSummary {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patient String
  activeConditions Int
  activeMedications Int
  recentEncounters Int
  lastEncounterDate DateTime
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model PatientUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  name String
  gender GenderEnum
  address String[]
  telecom String[]
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Period {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  start DateTime
  end DateTime
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}

model Procedure {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  patientId String @db.Char(33) /// FK: References Patient
  encounterId String @db.Char(33) /// FK: References Encounter
  code String
  performedPeriod String
  status StatusEnum @default(active)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([patientId])
  @@index([encounterId])
  @@index([orgId, status])
  // Relationship: patientId -> Patient
  // Relationship: encounterId -> Encounter
}

model ProcedureUpdate {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  performedPeriod String
  status StatusEnum
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([status])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([orgId, status])
}

model Quantity {
  id        String   @id @db.Char(33) /// Format: XX_<ULID>
  orgId     String   @map("org_id")
  value Decimal
  unit String
  system String
  code String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  createdBy String? @map("created_by")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")
  @@index([orgId])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
}
